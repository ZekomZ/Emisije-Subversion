<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>three.js webgl - glTF</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				font-family: Monospace;
				background: url('../images/1325703602155-All-Glory-To-The-Hypnocat.gif');
				background-size: 66%;
				background-position: center top;
				background-repeat: no-repeat;
				margin: 0px;
				overflow: hidden;
			}

			#info {
				color: #808080;
				position: absolute;
				top: 10px;
				width: 100%;
				text-align: center;
				z-index: 100;
				display:block;
			}

			#container {
				position: absolute;
				top: 0px;
				width:100%;
				height:100%;
				z-index: -1;
				opacity: 1;
			}

			#controls {
				position:absolute;
				width:500px;
				bottom:0%;
				right:0%;
				height:145px;
				background-color:White;
				opacity:.9;
				font: 13px/1.231 "Lucida Grande", Lucida, Verdana, sans-serif;
			}

			#status {
				position:absolute;
				width:25%;
				left:2%;
				top:95%;
				height:5%;
				opacity:.9;
				font: 13px/1.231 "Lucida Grande", Lucida, Verdana, sans-serif;
			}

			.control {
				position:absolute;
				margin-left:12px;
				width:100%;
				font-weight:bold;
			}

			.controlValue {
				position:absolute;
				left:36%;
				top:0%;
			}

			#scenes_control {
				position:absolute;
				top:8px;
			}

			#cameras_control {
				position:absolute;
				top:40px;
			}

			#animations_control {
				position:absolute;
				top:72px;
			}

			#materials_extension_control {
				position:absolute;
				top:104px;
			}

			#info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
		</style>
	</head>

	<body>
		<div id="info">
		<a href="http://threejs.org/" target="_blank">three.js</a> -
		<a href="https://github.com/KhronosGroup/glTF" target="_blank">glTF</a> loader -
		<br><br>
		monster by <a href="http://www.3drt.com/downloads.htm" target="_blank">3drt</a> -
		<a href="http://cesiumjs.org/" target="_blank">Cesium</a>
		</div>
	<div id="container">
	<canvas width="1519" height="766" style="width: 1089px; height: 50px;"></canvas></div>
	<div id="status">Load time: 5.82 seconds.</div>
	<div id="controls">
		<div class="control" id="scenes_control">
		Model
		<select class="controlValue" id="scenes_list" size="1" onchange="selectScene();" ondblclick="selectScene();"><option>Monster</option><option>Duck</option><option>Cesium Man</option><option selected="selected">Cesium Milk Truck</option></select>
		</div>

		<div class="control" id="cameras_control">
		Camera
		<select class="controlValue" id="cameras_list" size="1" onchange="selectCamera();" ondblclick="selectCamera();"><option selected="selected">[default]</option></select>
		</div>
		<div class="control" id="materials_extension_control">
			Background image
			<div class="controlValue">
			<input id="background_image_checkbox" onclick="toggleBackgroundImage();" type="checkbox">(On/Off)
			</div>
		</div>
		<div class="control" id="animations_control">
		Animations
		<div class="controlValue"><input checked="checked" onclick="toggleAnimations();" type="checkbox">Play</div>
		</div>


	</div>
		<script src="js/three.js"></script>
		/**@requires {@link https://threejs.org/examples/webgl_loader_gltf.html}
		<script src="js/loaders/GLTFLoader.js"></script>
		/**@requires {@link https://threejs.org/examples/misc_controls_orbit.html}
		<script src="js/controls/OrbitControls.js"></script>
	  /**@requires {@link https://github.com/ZekomZ/fr24-3d-models}
		<script>
			var orbitControls = null;
			var container, camera, scene, renderer, loader;

			var cameraIndex = 0;
			var cameras = [];
			var cameraNames = [];
			var defaultCamera = null;
			var gltf = null;

			function onload() {

				window.addEventListener( 'resize', onWindowResize, false );
				document.addEventListener( 'keydown', function(e) { onKeyDown(e); }, false );

				buildSceneList();
				switchScene(0);
				animate();

			}

			function initScene(index) {

				container = document.getElementById( 'container' );

				scene = new THREE.Scene();

				defaultCamera = new THREE.PerspectiveCamera( 45, container.offsetWidth / container.offsetHeight, 1, 20000 );

				//defaultCamera.up = new THREE.Vector3( 0, 1, 0 );
				scene.add( defaultCamera );
				camera = defaultCamera;

				var sceneInfo = sceneList[index];

				var spot1 = null;

				if (sceneInfo.addLights) {

					var ambient = new THREE.AmbientLight( 0x222222 );
					scene.add( ambient );

					var directionalLight = new THREE.DirectionalLight( 0xdddddd );
					directionalLight.position.set( 0, 0, 1 ).normalize();
					scene.add( directionalLight );

					spot1   = new THREE.SpotLight( 0xffffff, 0.3 );
					spot1.position.set( 10, 20, 10 );
					spot1.angle = 0.25;
					spot1.distance = 1024;
					spot1.penumbra = 0.75;

					if ( sceneInfo.shadows ) {

						spot1.castShadow = true;
						spot1.shadow.bias = 0.0001;
						spot1.shadow.mapSize.width = 2048;
						spot1.shadow.mapSize.height = 2048;

					}

					scene.add( spot1 );

					toggleBackgroundImage();

				}

				// RENDERER

				renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});

				renderer.setClearColor( 0x111111, 0 );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );

				if (sceneInfo.shadows) {
					renderer.shadowMap.enabled = true;
					renderer.shadowMap.type = THREE.PCFSoftShadowMap;
				}

				container.appendChild( renderer.domElement );

				var ground = null;

				if (sceneInfo.addGround) {
					var groundMaterial = new THREE.MeshPhongMaterial({
							color: 0xFFFFFF,
							shading: THREE.SmoothShading,
							opacity: 0.2
						});
					ground = new THREE.Mesh( new THREE.PlaneBufferGeometry(512, 512), groundMaterial);

					if (sceneInfo.shadows) {
						ground.receiveShadow = true;
					}

					if (sceneInfo.groundPos) {
						ground.position.copy(sceneInfo.groundPos);
					} else {
						ground.position.z = -70;
					}

					ground.rotation.x = -Math.PI / 2;

					scene.add(ground);
				}

				THREE.GLTFLoader.Shaders.removeAll(); // remove all previous shaders
				loader = new THREE.GLTFLoader;
				var loadStartTime = Date.now();
				var status = document.getElementById("status");
				status.innerHTML = "Loading...";
				var url = sceneInfo.url;
				var r = eval("/" + '\%s' + "/g");
				var dir = useMaterialsExtension ? 'glTF-MaterialsCommon' :  'glTF';
				url = url.replace(r, dir);

				var loadStartTime = Date.now();
				var status = document.getElementById("status");
				status.innerHTML = "Loading...";
				loader.load( url, function(data) {

					gltf = data;

					var object = gltf.scene;

					var loadEndTime = Date.now();

					var loadTime = (loadEndTime - loadStartTime) / 1000;

					status.innerHTML = "Load time: " + loadTime.toFixed(2) + " seconds.";

					if (sceneInfo.cameraPos)
						defaultCamera.position.copy(sceneInfo.cameraPos);

					if (sceneInfo.center) {
						orbitControls.target.copy(sceneInfo.center);
					}

					if (sceneInfo.objectPosition) {
						object.position.copy(sceneInfo.objectPosition);

						if (spot1) {
							spot1.position.set(sceneInfo.objectPosition.x - 100, sceneInfo.objectPosition.y + 200, sceneInfo.objectPosition.z - 100 );
							spot1.target.position.copy(sceneInfo.objectPosition);
						}
					}

					if (sceneInfo.objectRotation)
						object.rotation.copy(sceneInfo.objectRotation);

					if (sceneInfo.objectScale)
						object.scale.copy(sceneInfo.objectScale);

					cameraIndex = 0;
					cameras = [];
					cameraNames = [];

					if (gltf.cameras && gltf.cameras.length) {

						var i, len = gltf.cameras.length;

						for (i = 0; i < len; i++) {

							var addCamera = true;
							var cameraName = gltf.cameras[i].parent.name;

							if (sceneInfo.cameras && !(cameraName in sceneInfo.cameras)) {
									addCamera = false;
							}

							if (addCamera) {
								cameraNames.push(cameraName);
								cameras.push(gltf.cameras[i]);
							}

						}

						updateCamerasList();
						switchCamera(1);

					} else {

						updateCamerasList();
						switchCamera(0);

					}

					if (gltf.animations && gltf.animations.length) {

						var i, len = gltf.animations.length;
						for (i = 0; i < len; i++) {
							var animation = gltf.animations[i];
							animation.loop = true;
							// There's .3333 seconds junk at the tail of the Monster animation that
							// keeps it from looping cleanly. Clip it at 3 seconds
							if (sceneInfo.animationTime)
								animation.duration = sceneInfo.animationTime;
							animation.play();
						}
					}

					scene.add( object );
					onWindowResize();

				});

			orbitControls = new THREE.OrbitControls(defaultCamera, renderer.domElement);

			}

			function onWindowResize() {

				defaultCamera.aspect = container.offsetWidth / container.offsetHeight;
				defaultCamera.updateProjectionMatrix();

				var i, len = cameras.length;

				for (i = 0; i < len; i++) { // just do it for default
					cameras[i].aspect = container.offsetWidth / container.offsetHeight;
					cameras[i].updateProjectionMatrix();
				}

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function animate() {
				requestAnimationFrame( animate );
				THREE.GLTFLoader.Animations.update();
				THREE.GLTFLoader.Shaders.update(scene, camera);
				if (cameraIndex == 0)
					orbitControls.update();
				render();
			}

			function render() {
				renderer.render( scene, camera );
			}

			function onKeyDown(event) {

				var chr = String.fromCharCode(event.keyCode);

				if (chr == ' ') {

					index = cameraIndex + 1;
					if (index > cameras.length)
					index = 0;
					switchCamera(index);

				} else {

					var index = parseInt(chr);
					if (!isNaN(index)	&& (index <= cameras.length)) {
						switchCamera(index);
					}
				}

			}

			var sceneList = [
				{
					name : "Cesium : Milk truck",
					url : "./SampleData/models/CesiumMilkTruck/CesiumMilkTruck.gltf",
					cameraPos: new THREE.Vector3(0, 1, 10),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Milk truck - Cat",
					url : "./SampleData/models/CesiumMilkTruck-A/CesiumMilkTruck.gltf",
					cameraPos: new THREE.Vector3(0, 1, 10),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Milk truck - X - Red",
					url : "./SampleData/models/CesiumMilkTruck-X-Red/CesiumMilkTruck.gltf",
					cameraPos: new THREE.Vector3(0, 1, 10),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Milk truck - Y - Green",
					url : "./SampleData/models/CesiumMilkTruck-Y-Green/CesiumMilkTruck.gltf",
					cameraPos: new THREE.Vector3(0, 1, 10),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Milk truck - Z - Blue",
					url : "./SampleData/models/CesiumMilkTruck-Z-Blue/CesiumMilkTruck.gltf",
					cameraPos: new THREE.Vector3(0, 1, 10),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Man",
					url : "./SampleData/models/CesiumMan/Cesium_Man.gltf",
					cameraPos: new THREE.Vector3(0, 1, 9),
					addLights:true,
					addGround:true,
					shadows:true
				},


								{

									name : "Dinosaur A : ( t ) - Rex",
									url : "./Dinosaurs/t-Rex.gltf",
									cameraPos: new THREE.Vector3(-7, 6, 7),
									addLights:true,
									addGround:false,
									shadows:true
								},

									{

									name : "Dinosaur B : Triceratops",
									url : "./Dinosaurs/Triceratops.gltf",
									cameraPos: new THREE.Vector3(-7, 1, 1),
									addLights:true,
									addGround:false,
									shadows:true
								},

								{

									name : "Dinosaur C : Bird",
									url : "./Dinosaurs/DinosaurBird.gltf",
									cameraPos: new THREE.Vector3(-3, -2, 7),
									addLights:true,
									addGround:false,
									shadows:true
								},

								{

									name : "Dinosaur D : Dilophosaurus",
									url : "./Dinosaurs/DinoD.gltf",
									cameraPos: new THREE.Vector3(-45, 95, 35),
									addLights:true,
									addGround:true,
									shadows:true
								},

								{
									name : "Dinosaur E : Brachiosarus",
									url : "./Dinosaurs/DinoB.gltf",
									cameraPos: new THREE.Vector3(-22, -22, 9),
									addLights:true,
									addGround:true,
									shadows:true
								},

				{
					name : "Cesium : Ground vehicle", url : "./SampleData/models/CesiumGround/Cesium_Ground.gltf",
					cameraPos: new THREE.Vector3(30, 10, 70),
					objectScale: new THREE.Vector3(0.4, 0.4, 0.4),
					objectPosition: new THREE.Vector3(2, 1, 0),
					objectRotation: new THREE.Euler(0, - 3 * Math.PI / 4, 0),
					animationTime: 3,
					addLights:true,
					shadows:true,
					addGround:true
				},
				{
					name : "Cesium : Airplane", url : "./SampleData/models/CesiumAir/Cesium_Air.gltf",
					cameraPos: new THREE.Vector3(0, 1, 5),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Balloon",
					url : "./SampleData/models/FlightRadarBase/CesiumBalloon.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "Cesium : Wood tower",
					url : "./SampleData/models/WoodTower/Wood_Tower.gltf",
					cameraPos: new THREE.Vector3(0, 3, 10),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Helicopter - Cats",
					url : "./FlightRadar24/ec135.gltf",
					cameraPos: new THREE.Vector3(0, 1, -5),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{

					name : "FlightRadar : Helicopter - Eurocopter EC135 ",
					url : "./FlightRadar24/heli.gltf",
					cameraPos: new THREE.Vector3(0, 1, 5),
					addLights:true,
					addGround:true,
					shadows:true
				},



//Flightradar24 - Aircraft model

				{
					name : "FlightRadar : Boeing 737-600",
					url : "./FlightRadar24/b736.gltf",
					cameraPos: new THREE.Vector3(0, 1, -33),
					addLights:true,
					addGround:true,
					shadows:true
				},

				{
					name : "FlightRadar : Boeing 737-700",
					url : "./FlightRadar24/737-700.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 737-800",
					url : "./FlightRadar24/737.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 737-900",
					url : "./FlightRadar24/737-900.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 747-400",
					url : "./FlightRadar24/747.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 747-8i",
					url : "./FlightRadar24/747-8i.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 757-200",
					url : "./FlightRadar24/757.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 757-300",
					url : "./FlightRadar24/757-300.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 767-200",
					url : "./FlightRadar24/767-200.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 767-300",
					url : "./FlightRadar24/767.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 767-400",
					url : "./FlightRadar24/767-400.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 777-200",
					url : "./FlightRadar24/777.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 777-300",
					url : "./FlightRadar24/777-300.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 787-800",
					url : "./FlightRadar24/787.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Boeing 787-900",
					url : "./FlightRadar24/787-900.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A318",
					url : "./FlightRadar24/a318.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A319",
					url : "./FlightRadar24/a319.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A320",
					url : "./FlightRadar24/320.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A320a",
					url : "./FlightRadar24/a320.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A321",
					url : "./FlightRadar24/320-c.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A330-200",
					url : "./FlightRadar24/a330.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A330-300",
					url : "./FlightRadar24/a330-300.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A340-300",
					url : "./FlightRadar24/a340-300.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A340-600",
					url : "./FlightRadar24/a340.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A350",
					url : "./FlightRadar24/a350.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Airbus A380",
					url : "./FlightRadar24/a380.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : ATR 42",
					url : "./FlightRadar24/atr.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Cessna Citation II",
					url : "./FlightRadar24/citation.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Piper PA-28",
					url : "./FlightRadar24/pa28.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier CRJ700",
					url : "FlightRadar24/crj700.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Embraer E170",
					url : "./FlightRadar24/e170.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Embraer E190",
					url : "./FlightRadar24/e190.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier CRJ700",
					url : "./FlightRadar24/crj700.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier CRJ900",
					url : "./FlightRadar24/crj900.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : AN-225 Antonov 225",
					url : "./FlightRadar24/an225.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : A300-600ST Beluga",
					url : "./FlightRadar24/beluga.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier CS100",
					url : "./FlightRadar24/cs100.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier CS300",
					url : "./FlightRadar24/cs100.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier CS300",
					url : "./FlightRadar24/cs300.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				},
				{
					name : "FlightRadar : Bombardier Dash 8 Q400",
					url : "./FlightRadar24/q400.gltf",
					cameraPos: new THREE.Vector3(0, 1, -44),
					addLights:true,
					addGround:true,
					shadows:true
				}

			];

			function buildSceneList() {

				var elt = document.getElementById('scenes_list');

				while( elt.hasChildNodes() ){
					elt.removeChild(elt.lastChild);
				}

				var i, len = sceneList.length;

				for (i = 0; i < len; i++) {
					option = document.createElement("option");
					option.text=sceneList[i].name;
					elt.add(option);
				}

			}

			function switchScene(index) {

				cleanup();
				initScene(index);
				var elt = document.getElementById('scenes_list');
				elt.selectedIndex = index;

			}

			function selectScene() {

				var select = document.getElementById("scenes_list");
				var index = select.selectedIndex;

				if (index >= 0) {
					switchScene(index);
				}

			}

			function switchCamera(index) {

				cameraIndex = index;

				if (cameraIndex == 0) {
					camera = defaultCamera;
				}

				if (cameraIndex >= 1 && cameraIndex <= cameras.length) {
					camera = cameras[cameraIndex - 1];
				}

				var elt = document.getElementById('cameras_list');
				elt.selectedIndex = cameraIndex;

			}

			function updateCamerasList() {

				var elt = document.getElementById('cameras_list');

				while( elt.hasChildNodes() ){
					elt.removeChild(elt.lastChild);
				}

				option = document.createElement("option");
				option.text="[default]";
				elt.add(option);

				var i, len = cameraNames.length;

				for (i = 0; i < len; i++) {
					option = document.createElement("option");
					option.text=cameraNames[i];
					elt.add(option);
				}

			}

			function selectCamera() {

				var select = document.getElementById("cameras_list");
				var index = select.selectedIndex;

				if (index >= 0) {
					switchCamera(index);
				}

			}

			function toggleAnimations() {

				var i, len = gltf.animations.length;

				for (i = 0; i < len; i++) {

					var animation = gltf.animations[i];

					if (animation.running) {
						animation.stop();
					} else {
						animation.play();
					}

				}

			}

			//var useextmaterials = document.getElementById("materials_extension_checkbox");
			//var useMaterialsExtension = useextmaterials.hasAttribute("checked");
			var useMaterialsExtension = true;
			/*function toggleMaterialsExtension()
			{
				useMaterialsExtension = !useMaterialsExtension;
				selectScene();
			}*/

			function toggleBackgroundImage()
			{
				var useBackgroundImage=document.getElementById("background_image_checkbox").checked;
				//alert('toggleBackgroundImage : ' +useBackgroundImage);
				var styleBackground="";
				if (useBackgroundImage)
				{
				  styleBackground="url('../images/1325703602155-All-Glory-To-The-Hypnocat.gif') no-repeat top center";
				}
				else
				{
					styleBackground="transparent";
				}
				document.body.style.background=styleBackground;
				document.body.style.backgroundSize="55%";
			}


			function cleanup() {

				if (container && renderer) {
					container.removeChild(renderer.domElement);
				}

				cameraIndex = 0;
				cameras = [];
				cameraNames = [];
				defaultCamera = null;

				if (!loader || !gltf.animations)
					return;

				var i, len = gltf.animations.length;

				for (i = 0; i < len; i++) {
					var animation = gltf.animations[i];
					if (animation.running) {
						animation.stop();
					}
				}

			}

			onload();
		</script>

<div id="tts-placeholder-icon" class="placeholder-icon" title="Click to Show Translation" state="voice" style="background-image: url(&quot;resource://jid1-dqs9bdqga04hbw-at-jetpack/data/content_script/voice.png&quot;); display: none;"><canvas id="text-to-speech-loader" class="loading-circle" width="36" height="36" style="display: none;"></canvas></div></body></html>
